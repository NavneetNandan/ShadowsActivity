<html>
<head>
	<title>My first three.js app</title>
	<style>
		body { margin: 0; }
		canvas { width: 100%; height: 100% }
	</style>
</head>
<body>
<button id="ball">Ball</button>
<button id="cube">Cube</button>
<button id="teapot">Teapot</button>
<button id="eye_glasses">Spectacles</button>
<button id="light">CFL</button>
<button class="quiz">Play a Quiz</button>
<script src="js/three.js"></script>
<script src="js/PIElibrary.js"></script>
<script src="js/DragControls.js"></script>
<script src="js/OrbitControls.js"></script>
<script src="js/jquery.min.js"></script>

<script>
    function create_cube() {
        var geometry_cube = new THREE.BoxGeometry(1, 1, 1);
        var material_cube = new THREE.MeshBasicMaterial({color: 0x00ee00});
        var cube = new THREE.Mesh(geometry_cube, material_cube);
        cube.position.set(object_position_x, object_position_y, object_position_z);
        cube.castShadow = true;
        cube.receiveShadow = true;
        return cube;
    }

    function create_ball() {
        var myBall;
        var material_ball = new THREE.MeshBasicMaterial({color: 0xffee00});
        myBall = new THREE.Mesh(new THREE.SphereGeometry(0.6, 32, 32), material_ball);
        myBall.position.set(object_position_x, object_position_y, object_position_z);
        myBall.castShadow = true;
        myBall.receiveShadow = true;
        return myBall
    }

    function create_screen() {
        geometry = new THREE.BoxGeometry(10, 10, 0.5);
        material = new THREE.MeshLambertMaterial({color: 0xd0d0d0});
        material.opacity = 1
        myBack = new THREE.Mesh(geometry, material);
        myBack.position.set(0, 0, -2);
        myBack.receiveShadow = true;
        return myBack;
    }
    var scene = new THREE.Scene();
    var camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1000 );
    camera.position.x=0;
    camera.position.y=0;
    camera.position.z =10;
    var renderer = new THREE.WebGLRenderer();
    var loader = new THREE.ObjectLoader();
    renderer.setSize( window.innerWidth, window.innerHeight );
    document.body.appendChild( renderer.domElement );
//-----------object properties------------
    object_position_x=0;
    object_position_y=0;
    object_position_z=1;

//-----------objects-----------------------
    var cube;
    var teapot;
    var eye_glasses;
    var bulb;
    var ball;
    var screen;
//-----------lights------------------------
    var ambient_light=new THREE.AmbientLight(0xffffff,0.5);
    var light = new THREE.PointLight(0xffffff,1,0,0);
    light.position.set(0,0,5);
    light.castShadow=true;
    light.shadowCameraVisible = true;
//----------loading objects----------------
    cube=create_cube();
    ball = create_ball();
    screen = create_screen();
    loader.load("teapot-claraio.json",function ( obj ) {
        teapot=obj;
        teapot.position.set(object_position_x,object_position_y,object_position_z);
    });
    loader.load("lamp.json",function ( obj ) {
        bulb=obj
        bulb.position.set(0,-0.8,5)
        scene.add(bulb)
    });
    loader.load("glasses1.json",function ( obj ) {
        eye_glasses=obj;
        eye_glasses.scale.x=0.04;
        eye_glasses.scale.y=0.04;
        eye_glasses.scale.z=0.04;
        eye_glasses.rotation.y = -1.1*Math.PI/4;
        eye_glasses.position.set(object_position_x,object_position_y,object_position_z);

    });
    $('#teapot').click(function () {
        scene.add(teapot);
    });
    $('#eye_glasses').click(function () {
        scene.add(eye_glasses)
        }
    );
    $('#cube').click(function () {
        scene.add(cube)
    });
    $('#ball').click(function () {
        scene.add(ball)
    })

    //    loader.load("coconut-tree.json",function ( obj ) {
//        scene.add( obj );
//    });
//--------create-scene----------------
    scene.add(light);
    scene.add(ambient_light);
    scene.add(screen);
    scene.add(bulb);

    var controls = new THREE.OrbitControls( camera, renderer.domElement );
    var dragControls = new THREE.DragControls([cube], camera, renderer.domElement );
    dragControls.addEventListener( 'dragstart', function ( event ) { controls.enabled = false; } );
    dragControls.addEventListener( 'dragend', function ( event ) { controls.enabled = true; } );



    //    scene.add(myBall)
//    PIEaddElement(myBack);
//    loader = new THREE.TextureLoader();
//    texture = loader.load( 'hardwood2_diffuse.jpg' );
//    texture.wrapS = texture.wrapT = THREE.RepeatWrapping;
//    texture.repeat.set( 25, 25 );
//    texture.anisotropy = 16;
//    bottomB=-4
//    material = new THREE.MeshPhongMaterial( { color: 0xffffff, specular: 0x111111, map: texture } );
//    geometry = new THREE.PlaneBufferGeometry( mySceneW * 2, backB * 2 );
//    geometry = new THREE.BoxGeometry( mySceneW * 2, wallThickness, 100);
//    material = new THREE.MeshLambertMaterial( {color: 0xaaaaaa} );
//    myFloor  = new THREE.Mesh( geometry, material );
//    // myFloor.lookAt(new THREE.Vector3(0,1,0));
//    myFloor.position.set(myCenterX, bottomB - (wallThickness / 2), 0.0);
//    myFloor.receiveShadow = true;
//    scene.add(myFloor);

//    var textureFlare0 = THREE.ImageUtils.loadTexture("lensflare.png");
//    var textureFlare3 = THREE.ImageUtils.loadTexture("lensflare3.png");
//
//    var flareColor = new THREE.Color(0xffffff);
//    var lensFlare = new THREE.LensFlare( {size:50, distance:0.0, blending:THREE.AdditiveBlending, color:flareColor});
    //lensFlare.add(textureFlare3, 60, 0.6, THREE.AdditiveBlending);
//    lensFlare.add(textureFlare3, 70, 0.7, THREE.AdditiveBlending);
//    lensFlare.add(textureFlare3, 120, 0.9, THREE.AdditiveBlending);
//    lensFlare.add(textureFlare3, 70, 1.0, THREE.AdditiveBlending);

//    lensFlare.position.copy(light.position);
//    scene.add(lensFlare);



//
//
//    var textureFlare0 = THREE.ImageUtils.loadTexture( "lensflare.png" );
//    var textureFlare2 = THREE.ImageUtils.loadTexture( "lensflare2.png" );
//    var textureFlare3 = THREE.ImageUtils.loadTexture( "lensflare3.png" );
//    addLight( 0.55, 0.9, 0.5, 0, 0, 1000 );
//    function addLight( h, s, l, x, y, z ) {
//        var light = new THREE.PointLight( 0xffffff, 1.5, 2000 );
//        light.color.setHSL( h, s, l );
//        light.position.set( x, y, z );
//        scene.add( light );
//        var flareColor = new THREE.Color( 0xffffff );
//        flareColor.setHSL( h, s, l + 0.5 );
//        var lensFlare = new THREE.LensFlare( textureFlare0, 700, 0.0, THREE.AdditiveBlending, flareColor );
//        lensFlare.add( textureFlare2, 512, 0.0, THREE.AdditiveBlending );
////        lensFlare.add( textureFlare2, 512, 0.0, THREE.AdditiveBlending );
////        lensFlare.add( textureFlare2, 512, 0.0, THREE.AdditiveBlending );
////        lensFlare.add( textureFlare3, 60, 0.6, THREE.AdditiveBlending );
////        lensFlare.add( textureFlare3, 70, 0.7, THREE.AdditiveBlending );
//        lensFlare.add( textureFlare3, 120, 0.9, THREE.AdditiveBlending );
//        lensFlare.add( textureFlare3, 70, 1.0, THREE.AdditiveBlending );
//        lensFlare.customUpdateCallback = lensFlareUpdateCallback;
//        lensFlare.position.copy( light.position );
//        scene.add( lensFlare );
//    }

//    function lensFlareUpdateCallback( object ) {
//        var f, fl = object.lensFlares.length;
//        var flare;
//        var vecX = -object.positionScreen.x * 2;
//        var vecY = -object.positionScreen.y * 2;
//        for( f = 0; f < fl; f++ ) {
//            flare = object.lensFlares[ f ];
//            flare.x = object.positionScreen.x + vecX * flare.distance;
//            flare.y = object.positionScreen.y + vecY * flare.distance;
//            flare.rotation = 0;
//        }
//        object.lensFlares[ 2 ].y += 0.025;
//        object.lensFlares[ 3 ].rotation = object.positionScreen.x * 0.5 + THREE.Math.degToRad( 45 );
//    }
    var render = function () {
        requestAnimationFrame( render );

        cube.rotation.x += 0.05;
        cube.rotation.y += 0.05;
        cube.rotation.z += 0.05;

        renderer.render(scene, camera);
    };
    renderer.shadowMap.enabled = true;
    renderer.shadowMap.type = THREE.PCFShadowMap;
    render();
</script>
</body>
</html>